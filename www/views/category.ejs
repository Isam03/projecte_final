<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QuedaYa</title>
  <link rel="icon" type="image/x-icon" href="../Imagenes/Logo.ico">
  <!--Librerias para el HTML-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
  <!-- CCS Carousel Principal-->
  <link rel="stylesheet" href="../Sources/prueba.css">
  <!--END CCS Categorias-->
  <!--CCS Logo-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <link rel="stylesheet" href="../Sources/style.css">
  <!--END CCS Logo-->
  
</head>

<body style="background-color: #020b1c; min-width:240px;">

  <video id="myVideo" autoplay muted>
    <source src="../Imagenes/loading2.mp4" type="video/mp4">
  </video>



  <!-- Background Image -->
  <div class="content-can" id="carouselPrincipal"
    style="height: 800px; position: absolute; top: 0; left: 0; width: 100%; z-index: -1;">
    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="true">
      <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0"
          xmlns="http://www.w3.org/2000/svg" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
          xmlns="http://www.w3.org/2000/svg" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
          xmlns="http://www.w3.org/2000/svg" aria-label="Slide 3"></button>
      </div>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <div style="display: flex; justify-content: center; align-items: center; height: 100vh; width: 100%;">
            <h1 id="tituloCarousel">BARCELONA</h1>
            <img src="../Imagenes/FondoBarcelona.jpg" id="carouselPrincipal1" class="d-block" alt="...">
          </div>
        </div>
        <div class="carousel-item">
          <div style="display: flex; justify-content: center; align-items: center; height: 100vh; width: 100%;">
            <h1 id="tituloCarousel">BARCELONA</h1>
            <img src="../Imagenes/BgBarcelona2.jpg" id="carouselPrincipal1" class="d-block" alt="...">
          </div>
        </div>
        <div class="carousel-item">
          <div style="display: flex; justify-content: center; align-items: center; height: 100vh; width: 100%;">
            <h1 id="tituloCarousel">BARCELONA</h1>
            <img src="../Imagenes/BgBarcelona3.jpg" id="carouselPrincipal1" class="d-block" alt="...">
          </div>
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
        data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
        data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
  </div>
  <!-- END Background Image -->

  <!-- Nav Bar -->
  <%- include('navbar.ejs') %>
  <!-- END Nav Bar -->

  <!-- Card -->
  <div class="m-2">
    <div class="card rounded-3"
      style="position: absolute; top: 72%; left: 5%; width: 90%; opacity: 95%; border-color: red;">
      <div class="card-body rounded-2" id="bodyCard">
        <!-- Slider de categorias 1-->
        <br>
        <a class="icon-link icon-link-hover" id="tituloCategoria" href="#">
          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi-people-fill"
            viewBox="0 0 16 16">
            <path
              d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7Zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm-5.784 6A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216ZM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z" />
          </svg>
          <% if(categoria != null) { %>
          <font id="colorText"> <%= categoria.titulo %> </font><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
            fill="#c4d7e9" class="bi bi-arrow-right" viewBox="0 0 16 16">
            <path fill-rule="evenodd"
              d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z" />
          </svg>
          <% } %>
        </a>
          <div class="container">
            <div class="row row-cols-4">
              <% if (events !=null) { %>
                <% events.forEach(element=> { %>
                    <% if (element.id_categoria == categoria._id) { %>
                      <div class="col">
                        <div id="card" class="card" style="max-height: 17rem;">
                          <div id="img-wrapper" class="img-wrapper"><img src="../Imagenes/comida-rapida-casera.jpg"
                              class="d-block w-100 h-100 rounded-top-3" alt="..."> </div>
                          <div class="card-body">
                            <h5 class="card-title">
                              <%= element.titulo %>
                            </h5>
                            <p class="card-text" data-bs-toggle="tooltip" data-bs-placement="top"
                              data-bs-title="<%= element.descripcion %>">
                              <%= element.descripcion.substring(0,40) %>
                                ...
                            </p>
                          </div>
                        </div>
                      </div>
                    <% } %>
                    
                  <% }) %>
              <% } %>
            </div>
          </div>
        </div>
        <br><br>
      </div>
    </div>
  </div>
  <!-- END Card -->
  <script src="../app.js"></script>
  <script>
    window.onload = function () {
      const video = document.getElementById("myVideo");
      const videoYaMostrado = sessionStorage.getItem('videoYaMostrado');

      if (videoYaMostrado !== 'true') {
        video.play();

        video.addEventListener('ended', function () {
          video.parentNode.removeChild(video);
          sessionStorage.setItem('videoYaMostrado', 'true');
        });

        video.addEventListener('loadedmetadata', function () {
          video.webkitRequestFullscreen();
        });

        video.addEventListener('ended', function () {
          document.webkitExitFullscreen();
        });
      } else {
        video.parentNode.removeChild(video);
      }
    }

  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
  crossorigin="anonymous"></script>

<script>
  const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
  const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
</script>
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"
    integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N"
    crossorigin="anonymous"></script>
  
</body>

</html>